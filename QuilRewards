!pip install selenium
from selenium import webdriver
import time
from bs4 import BeautifulSoup
import re
import sys
import pprint

firefox_options = webdriver.FirefoxOptions()
firefox_options.add_argument('--headless')
ListpeerId = ["QmNbFyU1257ZeCpjLBr38Ws1oJfBvuNAR2fYEJGF6x47sZ","QmajRxn5KXHptZPzUhGpx7i66uPEvaiKjksXTscPhH5AJk"]

driver = webdriver.Firefox(options=firefox_options)
driver.get('https://quilibrium.com/rewards/')


#boucle pour chaque peer
for peer in ListpeerId:
    print("---------------------------------------------------------------------------------")
    # Find the input element with the placeholder text
    input_element = driver.find_element("xpath", "//input[@placeholder='Search Reward Address']")
    # Interact with the input element (for example, typing text)
    input_element.send_keys(peer)
    time.sleep(5)

    element = driver.find_element("tag name", "code")
    element.click()

    # Récupérer le contenu HTML après que la page ait été entièrement chargée
    html_content = driver.page_source


    # Analyser le contenu HTML avec BeautifulSoup
    soup = BeautifulSoup(html_content, 'html.parser')
    # print(soup.prettify())
    #peer id
    print("peer id: " + peer)
    # afficher last update
    last_update = soup.find('h2')
    print(last_update.text)

    # existing + reward + total
    resultat = soup.find("div", class_="center").findAll("div")

    for i in range(3):
        print(resultat[i].text)

    presences = soup.findAll("div", class_=re.compile(r"px-4.*bg-slate-100"))
    print("presence:")
    for presence in presences:
        print(presence.text)

    driver.refresh()

# Fermer le navigateur contrôlé par Selenium
driver.quit()
